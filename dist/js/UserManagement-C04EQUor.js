import{j as e}from"./chunk-BAZEzdRI.js";import{r as s}from"./chunk-N8EMqdL-.js";import{y as a}from"./chunk-CQIvISRI.js";import{O as r,aC as t,P as l,v as i,w as n,B as c,b as d,aD as o,aE as x,M as m,aF as h,e as u,aG as g,aH as p,aI as j,aJ as b,aK as f,t as N,aL as y,A as v,n as w,o as C,aM as A,aN as k,z as U,c as E,r as S,C as P,a6 as R,aO as I,aP as T,aQ as D}from"../assets/index-C0OMGUoK.js";import{B as O,M as L}from"./chunk-D8tE5vCa.js";import"./chunk-D92htay1.js";import{B as M}from"./chunk-JTK26ctt.js";import"./chunk-MJHYApCa.js";import"./chunk-Cef-BAxw.js";const V=()=>{const{role:V}=r(),{canManageUsers:F,canManageRole:z}=t(),[X,$]=s.useState([]),[_,q]=s.useState([]),[B,G]=s.useState({}),[J,H]=s.useState({}),[K,Q]=s.useState(""),[W,Y]=s.useState("all"),[Z,ee]=s.useState("all"),[se,ae]=s.useState(!1),[re,te]=s.useState(!1),[le,ie]=s.useState(!1),[ne,ce]=s.useState(!1),[de,oe]=s.useState(!1),[xe,me]=s.useState(null),[he,ue]=s.useState(!0),[ge,pe]=s.useState(!1),[je,be]=s.useState({page:1,limit:20,total:0,totalPages:0}),[fe,Ne]=s.useState({totalUsers:0,roleDistribution:{},statusDistribution:{}}),ye=s.useRef(null),ve=s.useRef(null),we=s.useRef(null),Ce=s.useRef(null),Ae=s.useRef(null),ke=s.useRef(null),Ue=s.useRef(null),[Ee,Se]=s.useState({}),[Pe,Re]=s.useState([]);s.useEffect((()=>{Ie()}),[je.page,je.limit]);const Ie=async()=>{try{ue(!0);const[a,r,t]=await Promise.all([l.users.getAll("","","",je.page,je.limit),l.config.getProjects(),l.config.getRoles()]);if(a.result&&($(a.result.users),be((e=>({...e,total:a.result.total,totalPages:a.result.totalPages}))),Ne(a.result.stats)),r.result&&q(r.result),t.result){const a=(s=>{if(!s||!s.roles)return{};const a={SUPER_ADMIN:e.jsx(D,{className:"h-4 w-4"}),ADMIN:e.jsx(T,{className:"h-4 w-4"}),TEST_DESIGNER:e.jsx(I,{className:"h-4 w-4"}),EXECUTOR:e.jsx(R,{className:"h-4 w-4"})},r={SUPER_ADMIN:"bg-purple-100 text-purple-800 border-purple-200",ADMIN:"bg-blue-100 text-blue-800 border-blue-200",TEST_DESIGNER:"bg-green-100 text-green-800 border-green-200",EXECUTOR:"bg-gray-100 text-gray-800 border-gray-200"},t={};return Object.entries(s.roles).forEach((([s,l])=>{t[s]={label:l.label,icon:a[s]||e.jsx(R,{className:"h-4 w-4"}),color:r[s]||"bg-gray-100 text-gray-800 border-gray-200",description:l.description,hierarchy:l.hierarchy}})),t})(t.result),r=(s=t.result)&&s.permissionSections?s.permissionSections:{};G(a),H(r)}}catch(r){a.error("Failed to load user management data")}finally{ue(!1)}var s},Te=s.useMemo((()=>X.filter((e=>{const s=""===K||e.username?.toLowerCase().includes(K.toLowerCase())||e.email?.toLowerCase().includes(K.toLowerCase())||e.firstName?.toLowerCase().includes(K.toLowerCase())||e.lastName?.toLowerCase().includes(K.toLowerCase()),a="all"===W||e.role===W,r="all"===Z||e.status===Z;return s&&a&&r}))),[X,K,W,Z]),De=s.useMemo((()=>Object.entries(B).map((([e,s])=>({value:e,label:s.label})))),[B]),Oe=s.useMemo((()=>[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"}]),[]),Le=()=>{ye.current&&(ye.current.value=""),ve.current&&(ve.current.value=""),we.current&&(we.current.value=""),Ce.current&&(Ce.current.value=""),Ae.current&&(Ae.current.value=""),ke.current&&(ke.current.value="EXECUTOR"),Ue.current&&(Ue.current.value="ACTIVE"),Re([]);const e={};Object.keys(J).forEach((s=>{e[s]={enabled:"dashboard"===s,sections:[]}})),Se(e)},Me=()=>({username:ye.current?.value||"",email:ve.current?.value||"",firstName:we.current?.value||"",lastName:Ce.current?.value||"",password:Ae.current?.value||"",role:ke.current?.value||"EXECUTOR",status:Ue.current?.value||"ACTIVE",projects:Pe,permissions:Ee}),Ve=s.useCallback(((e,s)=>{Se((a=>({...a,[e]:{...a[e],enabled:a[e]?.enabled||!1,sections:(a[e]?.sections||[]).includes(s)?(a[e]?.sections||[]).filter((e=>e!==s)):[...a[e]?.sections||[],s]}})))}),[]),Fe=s.useCallback((e=>{Se((s=>({...s,[e]:{...s[e],enabled:!s[e]?.enabled,sections:s[e]?.sections||[]}})))}),[]);return F?he?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-6 w-6 animate-spin text-indigo-600"}),e.jsx("span",{className:"text-gray-600",children:"Loading user management data..."})]})})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(c,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-indigo-100 mt-1",children:"Manage users, roles, and permissions across your organization"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:fe.totalUsers}),e.jsx("div",{className:"text-indigo-100 text-sm",children:"Total Users"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Object.entries(B).map((([s,a])=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${a.color}`,children:a.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:fe.roleDistribution?.[s]||0}),e.jsx("div",{className:"text-sm text-gray-600",children:a.label})]})]})},s)))}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:K,onChange:e=>Q(e.target.value),className:"pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm transition-all duration-300 hover:border-gray-300 w-full sm:w-80"})]}),e.jsxs("select",{value:W,onChange:e=>Y(e.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm transition-all duration-300 hover:border-gray-300",children:[e.jsx("option",{value:"all",children:"All Roles"}),Object.entries(B).map((([s,a])=>e.jsx("option",{value:s,children:a.label},s)))]}),e.jsxs("select",{value:Z,onChange:e=>ee(e.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm transition-all duration-300 hover:border-gray-300",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]}),e.jsxs(O,{onClick:()=>{Le(),ae(!0)},className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center space-x-2",children:[e.jsx(o,{className:"h-5 w-5"}),e.jsx("span",{children:"Add New User"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-indigo-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-700",children:"User"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-700",children:"Role"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-700",children:"Projects"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:Te.map((s=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:[s.firstName?.charAt(0),s.lastName?.charAt(0)]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",s.username]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs(M,{className:`inline-flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium border-2 ${B[s.role]?.color}`,children:[B[s.role]?.icon,e.jsx("span",{children:B[s.role]?.label})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(M,{className:"px-3 py-1 rounded-full text-sm font-medium border-2 "+("ACTIVE"===s.status?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"),children:s.status})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"text-sm text-gray-600",children:s.projects?.length>0?`${s.projects.length} projects`:"No projects"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"flex items-center space-x-2",children:z(s.role)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>(e=>{me(e),setTimeout((()=>{ye.current&&(ye.current.value=e.username||""),ve.current&&(ve.current.value=e.email||""),we.current&&(we.current.value=e.firstName||""),Ce.current&&(Ce.current.value=e.lastName||""),ke.current&&(ke.current.value=e.role||"EXECUTOR"),Ue.current&&(Ue.current.value=e.status||"ACTIVE")}),0),Re(e.projects||[]);const s=e.permissions||{},a={};Object.keys(J).forEach((e=>{a[e]={enabled:s[e]?.enabled||!1,sections:s[e]?.sections||[]}})),Se(a),te(!0)})(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:e.jsx(x,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>(e=>{me(e);const s=e.permissions||{},a={};Object.keys(J).forEach((e=>{a[e]={enabled:s[e]?.enabled||!1,sections:s[e]?.sections||[]}})),Se(a),ie(!0)})(s),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Manage Permissions",children:e.jsx(m,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{me(s),oe(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:e.jsx(h,{className:"h-4 w-4"})}),"SUPER_ADMIN"!==s.role&&e.jsx("button",{onClick:()=>{me(s),ce(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:e.jsx(u,{className:"h-4 w-4"})})]})})})]},s.id)))})]})})}),e.jsx(L,{isOpen:se,onClose:()=>ae(!1),title:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-4 rounded-2xl shadow-lg",children:e.jsx(o,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Create New User"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add a new team member to your organization"})]})]}),size:"4xl",children:e.jsxs("div",{className:"flex flex-col h-[calc(100vh-180px)] max-h-[850px]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-emerald-50 via-teal-50 to-cyan-50 rounded-2xl p-6 mb-8 border border-emerald-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg",children:e.jsx(c,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"New Team Member"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the details below to create a new user account"})]})]}),e.jsx("div",{className:"hidden md:flex bg-white rounded-xl p-4 shadow-sm border border-emerald-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"h-6 w-6 text-emerald-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Secure Setup"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl p-8 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-2xl shadow-lg",children:e.jsx(g,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Basic details and contact information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Username"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:ye,type:"text",placeholder:"e.g., john.doe or johndoe123",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(p,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Unique identifier for login"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(j,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Email Address"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:ve,type:"email",placeholder:"e.g., john.doe@company.com",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Primary contact email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"First Name"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:we,type:"text",placeholder:"e.g., John",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Last Name"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:Ce,type:"text",placeholder:"e.g., Doe",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-violet-50 via-purple-50 to-fuchsia-50 rounded-3xl p-8 border border-violet-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 p-3 rounded-2xl shadow-lg",children:e.jsx(b,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Security & Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Password, role assignment, and account settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(b,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{children:"Temporary Password"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:Ae,type:"password",placeholder:"••••••••••",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-violet-500 focus:ring-4 focus:ring-violet-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"User will change on first login"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(m,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{children:"User Role"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{ref:ke,defaultValue:"EXECUTOR",className:"w-full pl-12 pr-10 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 focus:border-violet-500 focus:ring-4 focus:ring-violet-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm appearance-none cursor-pointer",children:De.map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Determines access permissions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(y,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{children:"Account Status"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{ref:Ue,defaultValue:"ACTIVE",className:"w-full pl-12 pr-10 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 focus:border-violet-500 focus:ring-4 focus:ring-violet-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm appearance-none cursor-pointer",children:Oe.map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Active users can log in"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(w,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{children:"Account Created"})]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Will be set on creation"})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-orange-50 to-red-50 rounded-3xl p-8 border border-amber-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 p-3 rounded-2xl shadow-lg",children:e.jsx(A,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Project Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Assign user to specific projects and workspaces"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(k,{className:"h-5 w-5 text-amber-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Available Projects"})]}),_.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map((s=>{const a="string"==typeof s?s:s.projectId||s.id,r="string"==typeof s?s:s.projectName||s.name;return e.jsxs("label",{className:"flex items-center space-x-3 p-4 rounded-xl border border-gray-200 hover:border-amber-300 hover:bg-amber-50 transition-all duration-200 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Pe.includes(a),onChange:e=>{e.target.checked?Re((e=>[...e,a])):Re((e=>e.filter((e=>e!==a))))},className:"h-5 w-5 text-amber-600 border-2 border-gray-300 rounded-lg focus:ring-amber-500 focus:ring-offset-0 transition-colors"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r}),e.jsx("p",{className:"text-xs text-gray-500",children:"Project workspace access"})]})]},a)}))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No projects available"}),e.jsx("p",{className:"text-sm",children:"Create projects to assign users"})]})]}),Pe.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(U,{className:"h-5 w-5 text-green-600"}),e.jsxs("h5",{className:"font-semibold text-gray-900",children:["Selected Projects (",Pe.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map((s=>{const a=_.find((e=>("string"==typeof e?e:e.projectId||e.id)===s)),r="string"==typeof a?a:a?.projectName||a?.name||s;return e.jsxs("span",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:r})]},s)}))})]})]})]})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-8 border-t border-gray-200 bg-white",children:[e.jsx(O,{variant:"ghost",onClick:()=>ae(!1),className:"px-8 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 font-medium transition-all duration-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})}),e.jsx(O,{variant:"primary",onClick:async()=>{try{pe(!0);const e=Me();if(!(e.username&&e.email&&e.firstName&&e.lastName&&e.password))return void a.error("Please fill in all required fields");(await l.users.create(e)).result&&(a.success("User created successfully"),ae(!1),Le(),Ie())}catch(e){a.error("Failed to create user")}finally{pe(!1)}},disabled:ge,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",children:ge?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Creating User..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:"Create User"})]})})]})]})}),e.jsx(L,{isOpen:re,onClose:()=>te(!1),title:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-4 rounded-2xl shadow-lg",children:e.jsx(x,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit User"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Update information for ",xe?.firstName," ",xe?.lastName]})]})]}),size:"4xl",children:e.jsxs("div",{className:"flex flex-col h-[calc(100vh-180px)] max-h-[850px]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-2xl p-6 mb-8 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg",children:e.jsxs("span",{className:"text-white font-bold text-xl",children:[xe?.firstName?.charAt(0),xe?.lastName?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold text-gray-900",children:[xe?.firstName," ",xe?.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:xe?.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("ACTIVE"===xe?.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:xe?.status}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:xe?.role})]})]})]}),e.jsx("div",{className:"hidden md:flex bg-white rounded-xl p-4 shadow-sm border border-blue-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"h-6 w-6 text-blue-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"text-xs text-gray-500",children:(new Date).toLocaleDateString()})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 rounded-3xl p-8 border border-emerald-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-3 rounded-2xl shadow-lg",children:e.jsx(g,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update user details and contact information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{children:"Username"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:ye,type:"text",placeholder:"e.g., john.doe or johndoe123",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(p,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Unique identifier for login"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(j,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{children:"Email Address"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:ve,type:"email",placeholder:"e.g., john.doe@company.com",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Primary contact email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{children:"First Name"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:we,type:"text",placeholder:"e.g., John",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(g,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{children:"Last Name"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:Ce,type:"text",placeholder:"e.g., Doe",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 placeholder-gray-400 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl p-8 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-2xl shadow-lg",children:e.jsx(S,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Account Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Role assignment and account preferences"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(m,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"User Role"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{ref:ke,defaultValue:"EXECUTOR",className:"w-full pl-12 pr-10 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm appearance-none cursor-pointer",children:De.map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Determines access permissions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(y,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Account Status"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{ref:Ue,defaultValue:"ACTIVE",className:"w-full pl-12 pr-10 py-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-900 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none hover:border-gray-300 transition-all duration-300 text-base shadow-sm appearance-none cursor-pointer",children:Oe.map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-2",children:"Active users can log in"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(w,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Last Login"})]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:xe?.lastLogin?new Date(xe.lastLogin).toLocaleString():"Never"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-700",children:[e.jsx(w,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Account Created"})]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:xe?.createdAt?new Date(xe.createdAt).toLocaleDateString():"Unknown"})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-orange-50 to-red-50 rounded-3xl p-8 border border-amber-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 p-3 rounded-2xl shadow-lg",children:e.jsx(A,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Project Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Assign user to specific projects and workspaces"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(k,{className:"h-5 w-5 text-amber-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Available Projects"})]}),_.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map((s=>{const a="string"==typeof s?s:s.projectId||s.id,r="string"==typeof s?s:s.projectName||s.name;return e.jsxs("label",{className:"flex items-center space-x-3 p-4 rounded-xl border border-gray-200 hover:border-amber-300 hover:bg-amber-50 transition-all duration-200 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Pe.includes(a),onChange:e=>{e.target.checked?Re((e=>[...e,a])):Re((e=>e.filter((e=>e!==a))))},className:"h-5 w-5 text-amber-600 border-2 border-gray-300 rounded-lg focus:ring-amber-500 focus:ring-offset-0 transition-colors"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r}),e.jsx("p",{className:"text-xs text-gray-500",children:"Project workspace access"})]})]},a)}))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No projects available"}),e.jsx("p",{className:"text-sm",children:"Create projects to assign users"})]})]}),Pe.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(U,{className:"h-5 w-5 text-green-600"}),e.jsxs("h5",{className:"font-semibold text-gray-900",children:["Selected Projects (",Pe.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map((s=>{const a=_.find((e=>("string"==typeof e?e:e.projectId||e.id)===s)),r="string"==typeof a?a:a?.projectName||a?.name||s;return e.jsxs("span",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:r})]},s)}))})]})]})]})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-8 border-t border-gray-200 bg-white",children:[e.jsx(O,{variant:"ghost",onClick:()=>te(!1),className:"px-8 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 font-medium transition-all duration-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})}),e.jsx(O,{variant:"primary",onClick:async()=>{try{pe(!0);const e=Me();if(!(e.username&&e.email&&e.firstName&&e.lastName))return void a.error("Please fill in all required fields");(await l.users.update(xe.id,e)).result&&(a.success("User updated successfully"),te(!1),me(null),Le(),Ie())}catch(e){a.error("Failed to update user")}finally{pe(!1)}},disabled:ge,className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200",children:ge?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Updating User..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:"Update User"})]})})]})]})}),e.jsx(L,{isOpen:le,onClose:()=>ie(!1),title:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-2xl",children:e.jsx(m,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manage Permissions"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Configure access rights for ",xe?.firstName," ",xe?.lastName]})]})]}),size:"4xl",children:e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-h-[800px]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-6 mb-6 border border-purple-100",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-r from-purple-500 to-indigo-600 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold text-xl",children:[xe?.firstName?.charAt(0),xe?.lastName?.charAt(0)]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-xl font-bold text-gray-900",children:[xe?.firstName," ",xe?.lastName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",xe?.username," • ",xe?.email]})]}),e.jsx("div",{className:`px-6 py-3 rounded-2xl ${B[xe?.role]?.color||"bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[B[xe?.role]?.icon,e.jsx("span",{className:"font-semibold text-lg",children:B[xe?.role]?.label})]})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:Object.entries(J).map((([s,a])=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-3xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-6 border-b-2 border-gray-200",children:e.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:Ee[s]?.enabled||!1,onChange:()=>Fe(s),className:"rounded-xl border-2 border-gray-300 text-indigo-600 focus:ring-indigo-500 h-6 w-6 group-hover:border-indigo-400 transition-colors"}),Ee[s]?.enabled&&e.jsx(U,{className:"absolute -top-1 -right-1 h-4 w-4 text-green-500 bg-white rounded-full"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold text-gray-900 text-xl group-hover:text-indigo-600 transition-colors",children:a.label}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Configure ",a.label.toLowerCase()," access and permissions"]})]})]})}),Ee[s]?.enabled&&e.jsx("div",{className:"p-8 space-y-4 bg-gradient-to-br from-white to-gray-50",children:e.jsx("div",{className:"space-y-3",children:Object.entries(a.sections).map((([a,r])=>e.jsxs("label",{className:"flex items-center space-x-4 p-4 rounded-2xl hover:bg-white transition-all cursor-pointer group border border-gray-100 hover:border-indigo-200 hover:shadow-md",children:[e.jsx("input",{type:"checkbox",checked:Ee[s]?.sections?.includes(a)||!1,onChange:()=>Ve(s,a),className:"rounded-lg border-2 border-gray-300 text-indigo-600 focus:ring-indigo-500 h-5 w-5 group-hover:border-indigo-400 transition-colors"}),e.jsx("span",{className:"text-base text-gray-700 font-medium group-hover:text-indigo-600 transition-colors flex-1",children:r}),Ee[s]?.sections?.includes(a)&&e.jsx(U,{className:"h-5 w-5 text-green-500"})]},a)))})})]},s)))}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-3xl p-8 border-2 border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"bg-blue-500 p-3 rounded-2xl",children:e.jsx(S,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Permission Summary"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Overview of enabled permissions and sections"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:Object.entries(Ee).map((([s,a])=>e.jsxs("div",{className:"text-center bg-white rounded-2xl p-6 border border-blue-200",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl mb-3 "+(a.enabled?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:a.enabled?e.jsx(U,{className:"h-6 w-6"}):e.jsx(P,{className:"h-6 w-6"})}),e.jsx("div",{className:"text-base font-bold text-gray-900 mb-1",children:J[s]?.label}),e.jsx("div",{className:"text-sm text-gray-500",children:a.enabled?`${a.sections.length} sections`:"Disabled"})]},s)))})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex justify-end space-x-4 pt-6 mt-6 border-t-2 border-gray-200 bg-white",children:[e.jsx(O,{variant:"secondary",onClick:()=>ie(!1),disabled:ge,className:"px-8 py-4 text-base font-semibold",children:"Cancel"}),e.jsx(O,{onClick:async()=>{try{pe(!0);(await l.users.updatePermissions(xe.id,Ee)).result&&(a.success("Permissions updated successfully"),ie(!1),me(null),Le(),Ie())}catch(e){a.error("Failed to update permissions")}finally{pe(!1)}},disabled:ge,className:"px-12 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-base font-semibold",children:ge?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(n,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Updating Permissions..."})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{className:"h-5 w-5"}),e.jsx("span",{children:"Update Permissions"})]})})]})]})}),e.jsx(L,{isOpen:ne,onClose:()=>ce(!1),title:"Delete User",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(u,{className:"h-8 w-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete User Account"}),e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete"," ",e.jsxs("strong",{children:[xe?.firstName," ",xe?.lastName]}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(O,{variant:"secondary",onClick:()=>ce(!1),disabled:ge,children:"Cancel"}),e.jsx(O,{onClick:async()=>{try{pe(!0);null!==(await l.users.delete(xe.id)).result&&(a.success("User deleted successfully"),ce(!1),me(null),Ie())}catch(e){a.error("Failed to delete user")}finally{pe(!1)}},disabled:ge,className:"bg-red-600 hover:bg-red-700 text-white",children:ge?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete User"})]})})]})]})}),e.jsx(L,{isOpen:de,onClose:()=>oe(!1),title:"Reset Password",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(h,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reset User Password"}),e.jsxs("p",{className:"text-gray-600",children:["Generate a new temporary password for"," ",e.jsxs("strong",{children:[xe?.firstName," ",xe?.lastName]}),"?"]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(O,{variant:"secondary",onClick:()=>oe(!1),disabled:ge,children:"Cancel"}),e.jsx(O,{onClick:async()=>{try{pe(!0);const e=await l.users.resetPassword(xe.id);e.result&&(a.success(`Password reset successful. Temporary password: ${e.result.temporaryPassword}`),oe(!1),me(null))}catch(e){a.error("Failed to reset password")}finally{pe(!1)}},disabled:ge,className:"bg-orange-600 hover:bg-orange-700 text-white",children:ge?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Resetting..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset Password"})]})})]})]})})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(i,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-600",children:"You don't have permission to access user management."})]})})};export{V as default};
