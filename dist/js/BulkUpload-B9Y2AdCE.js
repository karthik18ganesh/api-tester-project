import{j as e}from"./chunk-BAZEzdRI.js";import{r as s}from"./chunk-N8EMqdL-.js";import{I as t,an as a,w as r,z as i,aH as l,aI as n,aJ as d,aK as c,v as o,C as m,as as x,e as h,J as g,ay as u,a3 as p,aL as N,aM as j}from"../assets/index-DPPazEPA.js";import{B as y,M as v}from"./chunk-CsFuKD-F.js";import{B as b}from"./chunk-JTK26ctt.js";import"./chunk-MJHYApCa.js";import"./chunk-Cef-BAxw.js";import"./chunk-CQIvISRI.js";const P=[{id:"upload",title:"Upload File",description:"Select and upload your Excel file",icon:e.jsx(u,{})},{id:"validate",title:"Validate Data",description:"Verify data structure and content",icon:e.jsx(i,{})},{id:"preview",title:"Preview & Review",description:"Review parsed data before processing",icon:e.jsx(x,{})},{id:"process",title:"Process & Create",description:"Create test components in the system",icon:e.jsx(g,{})}],f={"test-package":{label:"Test Packages",icon:e.jsx(j,{className:"h-5 w-5"}),color:"bg-purple-100 text-purple-800 border-purple-200",description:"Test package definitions and configurations"},"test-suite":{label:"Test Suites",icon:e.jsx(N,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-800 border-blue-200",description:"Test suite groupings with package associations"},"test-case":{label:"Test Cases",icon:e.jsx(p,{className:"h-5 w-5"}),color:"bg-green-100 text-green-800 border-green-200",description:"Individual test cases with API associations"}},w=()=>{const[p,N]=s.useState("upload"),[j,w]=s.useState(!1),[S,T]=s.useState(null),[D,I]=s.useState(!1),[k,C]=s.useState(null),[A,R]=s.useState(!1),[M,E]=s.useState(null),[U,H]=s.useState({current:0,total:0,status:"idle"}),O=s.useRef(null),_=s.useCallback((e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)}),[]),F=s.useCallback((e=>{e.preventDefault(),e.stopPropagation(),w(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&z(e.dataTransfer.files[0])}),[]),z=async e=>{if(e.name.match(/\.(xlsx|xls)$/)){T(e),N("validate"),I(!0);try{const s=await(e=>new Promise((s=>{setTimeout((()=>{s({fileName:e.name,fileSize:e.size,sheets:[{name:"Test_Packages",type:"test-package",rows:5,columns:["Package Name","Description","Environment","Priority","Owner"],data:[{"Package Name":"Payment API Tests",Description:"Complete payment flow testing",Environment:"QA",Priority:"High",Owner:"John Doe"},{"Package Name":"User Management Tests",Description:"User CRUD operations",Environment:"Staging",Priority:"Medium",Owner:"Sarah Smith"},{"Package Name":"Authentication Tests",Description:"Login and security tests",Environment:"QA",Priority:"High",Owner:"Mike Johnson"},{"Package Name":"Reporting Tests",Description:"Report generation tests",Environment:"Dev",Priority:"Low",Owner:"Emma Wilson"},{"Package Name":"Integration Tests",Description:"Third-party API integration",Environment:"QA",Priority:"High",Owner:"David Lee"}],validationStatus:"valid",errors:[]},{name:"Test_Suites",type:"test-suite",rows:8,columns:["Suite Name","Package Name","Description","Priority","Tags"],data:[{"Suite Name":"Payment Flow","Package Name":"Payment API Tests",Description:"End-to-end payment testing",Priority:"High",Tags:"payment,critical"},{"Suite Name":"Refund Process","Package Name":"Payment API Tests",Description:"Refund scenarios",Priority:"Medium",Tags:"payment,refund"},{"Suite Name":"User Registration","Package Name":"User Management Tests",Description:"New user signup",Priority:"High",Tags:"user,registration"},{"Suite Name":"User Profile","Package Name":"User Management Tests",Description:"Profile management",Priority:"Medium",Tags:"user,profile"},{"Suite Name":"Login Security","Package Name":"Authentication Tests",Description:"Security validations",Priority:"Critical",Tags:"security,login"},{"Suite Name":"Password Reset","Package Name":"Authentication Tests",Description:"Password recovery",Priority:"High",Tags:"security,password"},{"Suite Name":"Sales Reports","Package Name":"Reporting Tests",Description:"Sales data reports",Priority:"Medium",Tags:"reports,sales"},{"Suite Name":"API Gateway","Package Name":"Integration Tests",Description:"Gateway testing",Priority:"High",Tags:"integration,gateway"}],validationStatus:"valid",errors:[]},{name:"Test_Cases",type:"test-case",rows:15,columns:["Case Name","Suite Name","API ID","Method","Description","Priority"],data:[{"Case Name":"Valid Payment","Suite Name":"Payment Flow","API ID":"PAY_001",Method:"POST",Description:"Process valid payment",Priority:"High"},{"Case Name":"Invalid Card","Suite Name":"Payment Flow","API ID":"PAY_001",Method:"POST",Description:"Handle invalid card",Priority:"High"},{"Case Name":"Insufficient Funds","Suite Name":"Payment Flow","API ID":"PAY_001",Method:"POST",Description:"Insufficient balance",Priority:"Medium"},{"Case Name":"Full Refund","Suite Name":"Refund Process","API ID":"REF_001",Method:"POST",Description:"Complete refund",Priority:"High"},{"Case Name":"Partial Refund","Suite Name":"Refund Process","API ID":"REF_001",Method:"POST",Description:"Partial amount refund",Priority:"Medium"},{"Case Name":"Valid Signup","Suite Name":"User Registration","API ID":"USER_001",Method:"POST",Description:"New user creation",Priority:"Critical"},{"Case Name":"Duplicate Email","Suite Name":"User Registration","API ID":"USER_001",Method:"POST",Description:"Duplicate email validation",Priority:"High"},{"Case Name":"Update Profile","Suite Name":"User Profile","API ID":"USER_002",Method:"PUT",Description:"Profile update",Priority:"Medium"},{"Case Name":"Valid Login","Suite Name":"Login Security","API ID":"AUTH_001",Method:"POST",Description:"Successful login",Priority:"Critical"},{"Case Name":"Invalid Password","Suite Name":"Login Security","API ID":"AUTH_001",Method:"POST",Description:"Wrong password",Priority:"High"},{"Case Name":"Brute Force Protection","Suite Name":"Login Security","API ID":"AUTH_001",Method:"POST",Description:"Multiple failed attempts",Priority:"Critical"},{"Case Name":"Password Reset Request","Suite Name":"Password Reset","API ID":"AUTH_002",Method:"POST",Description:"Request password reset",Priority:"High"},{"Case Name":"Reset Token Validation","Suite Name":"Password Reset","API ID":"AUTH_003",Method:"POST",Description:"Validate reset token",Priority:"High"},{"Case Name":"Monthly Sales Report","Suite Name":"Sales Reports","API ID":"RPT_001",Method:"GET",Description:"Generate monthly report",Priority:"Medium"},{"Case Name":"Gateway Health Check","Suite Name":"API Gateway","API ID":"GW_001",Method:"GET",Description:"Gateway status",Priority:"High"}],validationStatus:"warning",errors:[{row:3,column:"API ID",message:"API ID PAY_001 not found in repository"},{row:8,column:"Method",message:"Invalid HTTP method"}]}],totalRows:28,processingTime:1.2})}),2e3)})))(e);C(s),N("preview")}catch(s){alert("Error processing file. Please try again."),N("upload")}finally{I(!1)}}else alert("Please upload a valid Excel file (.xlsx or .xls)")},L=()=>{T(null),C(null),N("upload"),H({current:0,total:0,status:"idle"}),O.current&&(O.current.value="")};return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(t,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload"}),e.jsx("p",{className:"text-emerald-100 mt-1",children:"Import Test Packages, Suites, and Cases from Excel files"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(y,{onClick:()=>{const e=document.createElement("a");e.href="#",e.download="bulk_upload_template.xlsx",e.click()},variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),"Download Template"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Progress"}),S&&e.jsxs(y,{onClick:L,variant:"secondary",size:"sm",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Start Over"]})]}),e.jsx("div",{className:"flex items-center justify-between",children:P.map(((s,t)=>{const a=(e=>{const s=P.findIndex((s=>s.id===e)),t=P.findIndex((e=>e.id===p));return s<t?"completed":s===t?"current":"pending"})(s.id);return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`\n                    w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all\n                    ${"completed"===a?"bg-green-500 border-green-500 text-white":""}\n                    ${"current"===a?"bg-emerald-500 border-emerald-500 text-white":""}\n                    ${"pending"===a?"bg-gray-100 border-gray-300 text-gray-400":""}\n                  `,children:"completed"===a?e.jsx(i,{className:"h-6 w-6"}):s.icon}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("div",{className:"text-sm font-medium "+("pending"===a?"text-gray-400":"text-gray-900"),children:s.title}),e.jsx("div",{className:"text-xs mt-1 "+("pending"===a?"text-gray-400":"text-gray-600"),children:s.description})]})]}),t<P.length-1&&e.jsx("div",{className:`\n                    flex-1 h-0.5 mx-4 transition-all\n                    ${"completed"===a?"bg-green-500":"bg-gray-200"}\n                  `})]},s.id)}))})]}),"upload"===p&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[e.jsx("div",{className:`\n              border-2 border-dashed rounded-xl p-12 text-center transition-all\n              ${j?"border-emerald-400 bg-emerald-50":"border-gray-300 hover:border-emerald-400 hover:bg-emerald-50"}\n            `,onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:F,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`\n                  p-4 rounded-full transition-all\n                  ${j?"bg-emerald-200":"bg-gray-100"}\n                `,children:e.jsx(l,{className:`\n                    h-12 w-12 transition-all\n                    ${j?"text-emerald-600":"text-gray-400"}\n                  `})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:j?"Drop your Excel file here":"Upload Your Excel File"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your Excel file here, or click to browse"}),e.jsxs(y,{onClick:()=>O.current?.click(),className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),"Choose File"]}),e.jsx("input",{ref:O,type:"file",accept:".xlsx,.xls",onChange:e=>{e.target.files&&e.target.files[0]&&z(e.target.files[0])},className:"hidden"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Supported formats: .xlsx, .xls | Maximum size: 10MB"})]})}),e.jsx("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(d,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Excel File Structure"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 1 - Test Packages:"})," Package Name, Description, Environment, Priority, Owner"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 2 - Test Suites:"})," Suite Name, Package Name, Description, Priority, Tags"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 3 - Test Cases:"})," Case Name, Suite Name, API ID, Method, Description, Priority"]})]})]})]})})]}),"validate"===p&&D&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing Your File"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing Excel structure and validating data..."})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(c,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{children:["File: ",S?.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Size: ",(S?.size/1024/1024).toFixed(2)," MB"]})]})})]})}),"preview"===p&&k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Validation Results"}),e.jsxs(b,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(i,{className:"h-4 w-4 mr-1"}),"Processing Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.sheets.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sheets Detected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k.totalRows}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rows"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:k.sheets.filter((e=>"valid"===e.validationStatus)).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Valid Sheets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:k.sheets.filter((e=>"warning"===e.validationStatus)).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Warnings"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-3",children:[e.jsx("strong",{children:"File:"})," ",k.fileName," •",e.jsx("strong",{children:" Processing Time:"})," ",k.processingTime,"s •",e.jsx("strong",{children:" Ready for import"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Detected Sheets"}),e.jsx("div",{className:"grid gap-4",children:k.sheets.map(((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${f[s.type]?.color||"bg-gray-100 text-gray-800"}`,children:f[s.type]?.icon||e.jsx(n,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsx(b,{className:f[s.type]?.color||"bg-gray-100 text-gray-800",children:f[s.type]?.label||"Unknown"}),e.jsxs(b,{className:"valid"===s.validationStatus?"bg-green-100 text-green-800 border-green-200":"warning"===s.validationStatus?"bg-amber-100 text-amber-800 border-amber-200":"bg-red-100 text-red-800 border-red-200",children:["valid"===s.validationStatus&&e.jsx(i,{className:"h-3 w-3 mr-1"}),"warning"===s.validationStatus&&e.jsx(o,{className:"h-3 w-3 mr-1"}),"error"===s.validationStatus&&e.jsx(m,{className:"h-3 w-3 mr-1"}),s.validationStatus]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[f[s.type]?.description," • ",s.rows," rows • ",s.columns.length," columns"]}),s.errors.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"text-sm text-amber-700 bg-amber-50 rounded px-2 py-1 inline-block",children:[s.errors.length," validation issue",s.errors.length>1?"s":""," found"]})})]})]}),e.jsxs(y,{onClick:()=>(e=>{E(e),R(!0)})(s),variant:"secondary",size:"sm",children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),"Preview"]})]})},t)))}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(y,{onClick:L,variant:"secondary",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(y,{onClick:async()=>{N("process"),H({current:0,total:k.totalRows,status:"processing"});for(let e=0;e<=k.totalRows;e++)await new Promise((e=>setTimeout(e,100))),H((s=>({...s,current:e})));H((e=>({...e,status:"completed"})))},className:"bg-emerald-600 hover:bg-emerald-700",disabled:k.sheets.some((e=>"error"===e.validationStatus)),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Create Test Components"]})]})]})]}),"process"===p&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:"completed"===U.status?e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"h-8 w-8 text-green-600"})}):e.jsx("div",{className:"animate-pulse w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(t,{className:"h-8 w-8 text-emerald-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"completed"===U.status?"Test Components Created Successfully!":"Creating Test Components"}),e.jsx("p",{className:"text-gray-600",children:"completed"===U.status?"All test packages, suites, and cases have been created and are ready for use.":"Please wait while we create your test components in the system..."})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[U.current," / ",U.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:U.current/U.total*100+"%"}})})]}),"completed"===U.status&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:k.sheets.find((e=>"test-package"===e.type))?.rows||0}),e.jsx("div",{className:"text-sm text-purple-700",children:"Test Packages"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:k.sheets.find((e=>"test-suite"===e.type))?.rows||0}),e.jsx("div",{className:"text-sm text-blue-700",children:"Test Suites"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-green-600",children:k.sheets.find((e=>"test-case"===e.type))?.rows||0}),e.jsx("div",{className:"text-sm text-green-700",children:"Test Cases"})]})]}),e.jsxs(y,{onClick:L,className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Upload Another File"]})]})]})}),e.jsx(v,{isOpen:A,onClose:()=>R(!1),title:`Preview: ${M?.name}`,size:"xl",children:M&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{className:f[M.type]?.color,children:[f[M.type]?.icon,e.jsx("span",{className:"ml-2",children:f[M.type]?.label})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[M.rows," rows • ",M.columns.length," columns"]})]}),M.errors.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"Validation Issues"}),e.jsx("div",{className:"space-y-1",children:M.errors.map(((s,t)=>e.jsxs("div",{className:"text-sm text-amber-700",children:["Row ",s.row,', Column "',s.column,'": ',s.message]},t)))})]}),e.jsx("div",{className:"overflow-x-auto max-h-96",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:M.columns.map(((s,t)=>e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b",children:s},t)))})}),e.jsxs("tbody",{children:[M.data.slice(0,10).map(((s,t)=>e.jsx("tr",{className:"border-b hover:bg-gray-50",children:M.columns.map(((t,a)=>e.jsx("td",{className:"px-3 py-2 text-gray-900",children:s[t]},a)))},t))),M.data.length>10&&e.jsx("tr",{children:e.jsxs("td",{colSpan:M.columns.length,className:"px-3 py-2 text-center text-gray-500 italic",children:["... and ",M.data.length-10," more rows"]})})]})]})})]})})]})};export{w as default};
