import{j as e}from"./chunk-BAZEzdRI.js";import{u as t,r as s}from"./chunk-N8EMqdL-.js";import{h as a,c as r,i,j as n,k as l,l as d,m as c,n as o,o as m,p as x,g as u}from"../assets/index-Duv1jWix.js";import{B as h}from"./chunk-Cz5oHws7.js";import{y as g}from"./chunk-CQIvISRI.js";import{n as p}from"./chunk-BV3C3NLD.js";import{C as y}from"./chunk-AnHeXkdU.js";import"./chunk-MJHYApCa.js";import"./chunk-Cef-BAxw.js";import"./chunk-BpEXFHuY.js";const f=()=>{const f=t(),[j,b]=s.useState([]),[N,v]=s.useState([]),[w,C]=s.useState(1),[S,k]=s.useState([]),[E,T]=s.useState(!1),[D,M]=s.useState(!1),[I,z]=s.useState(!0),[F,L]=s.useState(""),H=N.length,R=Math.ceil(H/6),V=N.slice(6*(w-1),6*w),$=()=>{L(""),v(j)},B=e=>{switch(e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"in progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.useEffect((()=>{(async()=>{z(!0);try{const e=await u("/api/v1/test-suites","GET"),{code:t,message:s,data:a}=e.result;if("200"===t){const e=a.content.map((e=>({id:e.testSuiteID,suiteId:e.testSuiteID,name:e.suiteName,count:e.testCases?.length||0,created:e.createdDate,executed:e.updatedDate,status:e.status||"Pending"})));b(e),v(e)}else g.error(s||"Failed to fetch test suites")}catch(e){g.error("Error fetching test suites")}finally{z(!1)}})()}),[]),e.jsxs("div",{className:"p-6 font-inter text-gray-800",children:[e.jsx(h,{items:[{label:"Test Design"},{label:"Test Suite"}]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Test Suites"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage collections of test cases grouped for execution"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("input",{type:"text",placeholder:"Search suites...",value:F,onChange:e=>{const t=e.target.value.toLowerCase();if(L(t),t.trim()){const e=j.filter((e=>e.name.toLowerCase().includes(t)||e.suiteId.toString().includes(t)));v(e)}else v(j);C(1)},className:"w-full px-10 py-2 border rounded-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),F&&e.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(r,{})})]})]}),e.jsx("div",{className:"flex justify-end mb-4",children:0===S.length?e.jsxs("button",{onClick:()=>f("/test-design/test-suite/create"),className:"px-4 py-2 bg-[#4F46E5] text-white rounded-md hover:bg-indigo-700 hover:-translate-y-0.5 transition-all flex items-center",children:[e.jsx(i,{className:"mr-2"}),"Create Test Suite"]}):e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("span",{className:"flex items-center px-3 py-1 bg-indigo-50 text-indigo-700 rounded-md",children:[S.length," item",1!==S.length?"s":""," selected"]}),e.jsxs("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 hover:-translate-y-0.5 transition-all flex items-center",children:[e.jsx(n,{className:"mr-2"}),"Delete"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>T(!E),className:"px-4 py-2 bg-[#4F46E5] text-white rounded-md hover:bg-indigo-700 hover:-translate-y-0.5 transition-all flex items-center",children:[e.jsx(l,{className:"mr-2"}),"Export"]}),E&&e.jsxs("div",{className:"absolute right-0 mt-2 bg-white border rounded-md shadow-lg w-40 z-10 animate-fade-in",children:[e.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer rounded-t-md flex items-center text-gray-700",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2-1a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V4a1 1 0 00-1-1H6z",clipRule:"evenodd"})]}),"PDF"]}),e.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer rounded-b-md flex items-center text-gray-700 border-t",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm11 1H6v8l4-2 4 2V6z",clipRule:"evenodd"})}),"Excel"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:I?e.jsxs("div",{className:"p-8 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading test suites..."})]}):0===N.length?e.jsxs("div",{className:"p-8 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-4 mb-4",children:e.jsx(d,{className:"h-8 w-8 text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No test suites found"}),e.jsx("p",{className:"text-gray-500 mb-6 text-center max-w-md",children:F?`No suites match your search "${F}"`:"Create your first test suite to organize your test cases"}),F?e.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 hover:-translate-y-0.5 transition-all flex items-center",onClick:$,children:[e.jsx(r,{className:"mr-2"}),"Clear Search"]}):e.jsxs("button",{className:"px-4 py-2 bg-[#4F46E5] text-white rounded-md hover:bg-indigo-700 hover:-translate-y-0.5 transition-all flex items-center",onClick:()=>f("/test-design/test-suite/create"),children:[e.jsx(i,{className:"mr-2"}),"Create Test Suite"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm text-left table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 font-medium w-[5%]",children:e.jsx("input",{type:"checkbox",onChange:()=>{const e=V.map((e=>e.id)),t=e.every((e=>S.includes(e)));k((s=>t?s.filter((t=>!e.includes(t))):[...new Set([...s,...e])]))},checked:V.length>0&&V.every((e=>S.includes(e.id))),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("th",{className:"py-3 px-4 font-medium w-[10%]",children:"ID"}),e.jsx("th",{className:"py-3 px-4 font-medium w-[25%]",children:"Suite Name"}),e.jsx("th",{className:"py-3 px-4 font-medium w-[10%] text-center",children:"Test Cases"}),e.jsx("th",{className:"py-3 px-4 font-medium w-[15%]",children:"Created"}),e.jsx("th",{className:"py-3 px-4 font-medium w-[20%]",children:"Last Executed"}),e.jsx("th",{className:"py-3 px-4 font-medium w-[15%]",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:V.map((t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("input",{type:"checkbox",checked:S.includes(t.id),onChange:()=>{return e=t.id,void k((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 font-mono text-xs truncate",children:t.suiteId}),e.jsx("td",{onClick:()=>f("/test-design/test-suite/create",{state:{suite:t}}),className:"py-3 px-4 text-indigo-600 hover:text-indigo-800 font-medium cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"truncate",children:t.name}),e.jsx(c,{className:"ml-1 flex-shrink-0 h-4 w-4"})]})}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full text-xs font-medium",children:t.count})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 truncate",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"mr-1 flex-shrink-0 h-3 w-3 text-gray-400"}),e.jsx("span",{className:"truncate",children:t.created})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 truncate",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"mr-1 flex-shrink-0 h-3 w-3 text-gray-400"}),e.jsx("span",{className:"truncate",children:t.executed||"Never"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B(t.status)}`,children:["Completed"===t.status&&e.jsx(x,{className:"mr-1 h-3 w-3"}),t.status]})})]},t.id)))})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Math.min(6*(w-1)+1,N.length)," to"," ",Math.min(6*w,N.length)," of ",N.length," items"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>C((e=>Math.max(e-1,1))),disabled:1===w,className:"px-3 py-1 border rounded-md hover:bg-gray-100 hover:-translate-y-0.5 disabled:opacity-40 disabled:hover:transform-none text-gray-600 transition-all",children:"Previous"}),(()=>{const e=[];e.push(1),w>4&&e.push("...");for(let t=Math.max(2,w-2);t<=Math.min(R-1,w+2);t++)e.push(t);return w+2<R-1&&e.push("..."),R>1&&e.push(R),e})().map(((t,s)=>e.jsx("button",{disabled:"..."===t,onClick:()=>"..."!==t&&C(t),className:"px-3 py-1 border rounded-md hover:-translate-y-0.5 transition-all "+(t===w?"bg-indigo-600 text-white border-indigo-600":"hover:bg-gray-100 text-gray-600"),children:t},s))),e.jsx("button",{onClick:()=>C((e=>Math.min(e+1,R))),disabled:w===R||0===R,className:"px-3 py-1 border rounded-md hover:bg-gray-100 hover:-translate-y-0.5 disabled:opacity-40 disabled:hover:transform-none text-gray-600 transition-all",children:"Next"})]})]})]})})]}),e.jsx(y,{isOpen:D,onClose:()=>M(!1),onConfirm:async()=>{if(0===S.length)return void g.warning("No test suites selected for deletion");const e={requestMetaData:{userId:localStorage.getItem("userId")||"302",transactionId:p(),timestamp:(new Date).toISOString()},data:S};try{const t=await u("/api/v1/test-suites/delete","DELETE",e),{code:s,message:a}=t.result;if("200"===s){g.success(a||"Test Suites deleted successfully");const e=j.filter((e=>!S.includes(e.id)));b(e),v(e),k([])}else g.error(a||"Failed to delete Test Suites")}catch(t){g.error("Error occurred while deleting Test Suites")}finally{M(!1)}},title:"Delete Test Suites",message:`Are you sure you want to delete ${S.length} selected test suite${1!==S.length?"s":""}? This action cannot be undone.`})]})};export{f as default};
