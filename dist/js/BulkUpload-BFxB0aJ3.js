import{j as e}from"./chunk-BAZEzdRI.js";import{r as s}from"./chunk-N8EMqdL-.js";import{O as t,u as a,I as r,ar as l,w as i,z as n,C as c,aS as d,aT as o,aU as m,aV as x,v as h,aw as u,e as g,J as p,a3 as j,o as N,B as v,aB as f,aW as b,aN as y,aX as w}from"../assets/index-C0OMGUoK.js";import{B as S,M as k}from"./chunk-D8tE5vCa.js";import{B as C}from"./chunk-JTK26ctt.js";import"./chunk-MJHYApCa.js";import"./chunk-Cef-BAxw.js";import"./chunk-CQIvISRI.js";const P="http://localhost:8080",T="/api/bulk-upload",I=()=>{try{const e=t.getState()?.token||localStorage.getItem("token");return e?{Authorization:`Bearer ${e}`}:{}}catch{return{}}},_=[{id:"upload",title:"Upload File",description:"Select and upload your Excel file",icon:e.jsx(f,{})},{id:"validate",title:"Validate Data",description:"Verify data structure and content",icon:e.jsx(n,{})},{id:"preview",title:"Preview & Review",description:"Review parsed data before processing",icon:e.jsx(u,{})},{id:"process",title:"Process & Create",description:"Create test components in the system",icon:e.jsx(p,{})}],E={package:{label:"Test Packages",icon:e.jsx(w,{className:"h-5 w-5"}),color:"bg-purple-100 text-purple-800 border-purple-200",description:"Test package definitions and configurations"},suite:{label:"Test Suites",icon:e.jsx(y,{className:"h-5 w-5"}),color:"bg-blue-100 text-blue-800 border-blue-200",description:"Test suite groupings with package associations"},"test-case":{label:"Test Cases",icon:e.jsx(j,{className:"h-5 w-5"}),color:"bg-green-100 text-green-800 border-green-200",description:"Individual test cases with API associations"}},D=e=>{if(!e)return"unknown";const s=String(e).trim().toLowerCase();return"package"===s||"test_package"===s||"test-package"===s?"package":"suite"===s||"test_suite"===s||"test-suite"===s?"suite":"test case"===s||"test_case"===s||"test-case"===s?"test-case":s},R=e=>{if(!e)return"unknown";const s=String(e).trim().toLowerCase();return"success"===s||"valid"===s||"ok"===s||"passed"===s?"valid":"warning"===s||"warn"===s?"warning":"error"===s||"failed"===s||"fail"===s?"error":s},z={suite_name:"suiteName","suite name":"suiteName",package_name:"packageName","package name":"packageName","testcase name":"testCaseName","test case name":"testCaseName","test case id":"testCaseId",type:"type","response type":"responseType","report type":"reportType","project id":"projectId"},$=e=>{const s=String(e).trim(),t=s.toLowerCase().replace(/\s+/g," ").replace(/_/g," ");if(z[t])return z[t];const a=t.replace(/\s+/g,"_");return z[a]?z[a]:(e=>{const s=String(e).trim().replace(/[^a-zA-Z0-9_\s]/g,""),t=s.split(/[\s_]+/g).filter(Boolean);if(0===t.length)return s;const[a,...r]=t;return a.toLowerCase()+r.map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join("")})(s)},A=()=>{const[y,w]=s.useState("upload"),[z,A]=s.useState(!1),[F,O]=s.useState(null),[U,L]=s.useState(!1),[B,M]=s.useState(null),[V,W]=s.useState(null),[Y,J]=s.useState(!1),[H,K]=s.useState(null),[X,Z]=s.useState({current:0,total:0,status:"idle"}),[q,G]=s.useState(20),[Q,ee]=s.useState(null),[se,te]=s.useState(null),ae=s.useRef(null),re=t((e=>e.userId)),le=a((e=>e.activeProject)),ie=s.useCallback((e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?A(!0):"dragleave"===e.type&&A(!1)}),[]),ne=s.useCallback((e=>{e.preventDefault(),e.stopPropagation(),A(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&ce(e.dataTransfer.files[0])}),[]),ce=async e=>{if(te(null),!e.name.match(/\.xlsx$/i))return te("Please upload a valid Excel .xlsx file"),w("upload"),void O(null);if(!le?.id||!re)return te("Missing active project or user. Please ensure you are logged in and a project is selected."),w("upload"),void O(null);O(e),w("validate"),L(!0);try{const s=await(async({file:e,userId:s,projectId:t})=>{const a=`${P}${T}/validate`,r=new FormData;r.append("file",e),r.append("userId",String(s??"")),r.append("projectId",String(t??""));const l=await fetch(a,{method:"POST",headers:{...I()},body:r});if(!l.ok){const e=l.status;throw new Error(400===e?"Invalid file. Please upload a .xlsx template.":`Validation failed (HTTP ${e})`)}return await l.json()})({file:e,userId:re,projectId:le.id}),t=(e=>{const{success:s,data:t,processingTime:a}=e||{},r=t?.uploadId,l=t?.fileName,i=t?.fileSize,n=(t?.sheets||[]).map((e=>{const s=(e=>{const s=(e||"").toLowerCase();return s.includes("package")?"test-package":s.includes("suite")?"test-suite":s.includes("case")?"test-case":"unknown"})(e.type),t=e.columns||[],a=e.validationStatus||"",r="success"===a?"valid":a,l=(Array.isArray(e.data)?e.data:[]).map((e=>{const a={};return"test-package"===s?(a.Package_Name=e.packageName??e.Package_Name,a.Description=e.description??e.Description,a.Execution=e.execution??e.Execution,a.Execution_Type=e.executionType??e.Execution_Type,a.Report_Type=e.reportType??e.Report_Type,a.Project_ID=e.projectId??e.Project_ID):"test-suite"===s?(a.Suite_Name=e.suiteName??e.Suite_Name,a.Description=e.description??e.Description,a.Execution=e.execution??e.Execution,a.Execution_Type=e.executionType??e.Execution_Type,a.Publish_method=e.publishMethod??e.Publish_method,a.FTP_Path=e.ftpPath??e.FTP_Path,a.Email=e.email??e.Email,a.Report_Type=e.reportType??e.Report_Type,a.Package_Name=e.packageName??e.Package_Name):"test-case"===s&&(a.TestCaseName=e.testCaseName??e.TestCaseName,a.Type=e.type??e.Type,a.RESPONSE_TYPE=e.responseType??e.RESPONSE_TYPE,a.API_ID=e.testCaseId??e.apiId??e.API_ID,a.DESCRIPTION=e.description??e.DESCRIPTION,a.Suite_Name=e.suiteName??e.Suite_Name),t.forEach((s=>{s in a||(a[s]=e[s]??"")})),a})),i=(Array.isArray(e.errors)?e.errors:[]).flatMap((e=>{const s=Array.isArray(e.messages)?e.messages:[e.message].filter(Boolean);return s.length?s.map((s=>({row:e.row,column:e.column,message:s,severity:e.severity||"error"}))):[]}));return{name:e.name,type:s,rows:e.rowCount??l.length,columns:t,data:l,validationStatus:r,errors:i}})),c=n.reduce(((e,s)=>e+(s.rows||0)),0);return{success:Boolean(s),uploadId:r,fileName:l,fileSize:i,processingTime:a,sheets:n,totalRows:c}})(s);M(t),W(t.uploadId||s?.data?.uploadId||null),Z({current:0,total:t.totalRows||0,status:"idle"}),w("preview")}catch(s){te(s?.message||"Validation failed. Please check your file and try again."),w("upload"),O(null)}finally{L(!1)}},de=()=>{O(null),M(null),W(null),te(null),ee(null),w("upload"),Z({current:0,total:0,status:"idle"}),ae.current&&(ae.current.value="")};return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(r,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload"}),e.jsx("p",{className:"text-emerald-100 mt-1",children:"Import Test Packages, Suites, and Cases from Excel files"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(S,{onClick:()=>{(async()=>{const e=`${P}${T}/download-template`,s=await fetch(e,{headers:{...I()}});if(!s.ok)throw new Error(`Failed to download template (HTTP ${s.status})`);const t=await s.blob(),a=(s.headers.get("Content-Disposition")||"").match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),r=decodeURIComponent(a?.[1]||a?.[2]||"Template_Automation.xlsx"),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download=r,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(l.href)})().catch((e=>{}))},variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Download Template"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Progress"}),F&&e.jsxs(S,{onClick:de,variant:"secondary",size:"sm",children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),"Start Over"]})]}),e.jsx("div",{className:"flex items-center justify-between",children:_.map(((s,t)=>{const a=(e=>{const s=_.findIndex((s=>s.id===e)),t=_.findIndex((e=>e.id===y));return s<t?"completed":s===t?"current":"pending"})(s.id);return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`\n                    w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all\n                    ${"completed"===a?"bg-green-500 border-green-500 text-white":""}\n                    ${"current"===a?"bg-emerald-500 border-emerald-500 text-white":""}\n                    ${"pending"===a?"bg-gray-100 border-gray-300 text-gray-400":""}\n                  `,children:"completed"===a?e.jsx(n,{className:"h-6 w-6"}):s.icon}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("div",{className:"text-sm font-medium "+("pending"===a?"text-gray-400":"text-gray-900"),children:s.title}),e.jsx("div",{className:"text-xs mt-1 "+("pending"===a?"text-gray-400":"text-gray-600"),children:s.description})]})]}),t<_.length-1&&e.jsx("div",{className:`\n                    flex-1 h-0.5 mx-4 transition-all\n                    ${"completed"===a?"bg-green-500":"bg-gray-200"}\n                  `})]},s.id)}))})]}),"upload"===y&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[se&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(c,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Upload Error"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:se})]})]})}),e.jsx("div",{className:`\n                  border-2 border-dashed rounded-xl p-12 text-center transition-all\n                  ${z?"border-emerald-400 bg-emerald-50":se?"border-red-300 bg-red-50":"border-gray-300 hover:border-emerald-400 hover:bg-emerald-50"}\n                `,onDragEnter:ie,onDragLeave:ie,onDragOver:ie,onDrop:ne,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`\n                  p-4 rounded-full transition-all\n                  ${z?"bg-emerald-200":"bg-gray-100"}\n                `,children:e.jsx(d,{className:`\n                    h-12 w-12 transition-all\n                    ${z?"text-emerald-600":"text-gray-400"}\n                  `})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:z?"Drop your Excel file here":"Upload Your Excel File"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your Excel file here, or click to browse"}),e.jsxs(S,{onClick:()=>ae.current?.click(),className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Choose File"]}),e.jsx("input",{ref:ae,type:"file",accept:".xlsx",onChange:e=>{e.target.files&&e.target.files[0]&&ce(e.target.files[0])},className:"hidden"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Supported format: .xlsx | Maximum size: 10MB"})]})}),e.jsx("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(m,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Excel File Structure"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 1 - Test Packages:"})," Package Name, Description, Environment, Priority, Owner"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 2 - Test Suites:"})," Suite Name, Package Name, Description, Priority, Tags"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sheet 3 - Test Cases:"})," Case Name, Suite Name, API ID, Method, Description, Priority"]})]})]})]})})]}),"validate"===y&&U&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing Your File"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing Excel structure and validating data..."})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx(x,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{children:["File: ",F?.name]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Size: ",(F?.size/1024/1024).toFixed(2)," MB"]})]})})]})}),"preview"===y&&B&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Validation Results"}),e.jsxs(C,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(n,{className:"h-4 w-4 mr-1"}),"Processing Complete"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:B.sheets.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sheets Detected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:B.totalRows??B.sheets.reduce(((e,s)=>e+(s.rows||s.rowCount||0)),0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rows"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:B.sheets.filter((e=>"valid"===R(e.validationStatus))).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Valid Sheets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:B.sheets.filter((e=>"warning"===R(e.validationStatus))).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Warnings"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 rounded-lg p-3",children:[e.jsx("strong",{children:"File:"})," ",B.fileName," â€¢",e.jsx("strong",{children:" Size:"})," ",B.fileSize?`${(B.fileSize/1024).toFixed(0)} KB`:"â€”"," â€¢",e.jsx("strong",{children:" Processing Time:"})," ",B.processingTime??B.processing_time??"â€”","s â€¢",e.jsx("strong",{children:" Status:"})," ",(()=>{const e=B.sheets.map((e=>R(e.validationStatus)));return e.includes("error")?"Errors Found":e.includes("warning")?"Warnings":"Validated"})()]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Detected Sheets"}),e.jsx("div",{className:"grid gap-4",children:B.sheets.map(((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[(()=>{const t=D(s.type);return e.jsx("div",{className:`p-2 rounded-lg ${E[t]?.color||"bg-gray-100 text-gray-800"}`,children:E[t]?.icon||e.jsx(o,{className:"h-5 w-5"})})})(),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),(()=>{const t=D(s.type);return e.jsx(C,{className:E[t]?.color||"bg-gray-100 text-gray-800",children:E[t]?.label||"Unknown"})})(),(()=>{const t=R(s.validationStatus);return e.jsxs(C,{className:"valid"===t?"bg-green-100 text-green-800 border-green-200":"warning"===t?"bg-amber-100 text-amber-800 border-amber-200":"bg-red-100 text-red-800 border-red-200",children:["valid"===t&&e.jsx(n,{className:"h-3 w-3 mr-1"}),"warning"===t&&e.jsx(h,{className:"h-3 w-3 mr-1"}),"error"===t&&e.jsx(c,{className:"h-3 w-3 mr-1"}),t]})})()]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(()=>{const e=D(s.type);return E[e]?.description||"Sheet"})()," â€¢ ",s.rows||s.rowCount," rows â€¢ ",s.columns.length," columns"]}),s.errors.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"text-sm text-amber-700 bg-amber-50 rounded px-2 py-1 inline-block",children:[s.errors.length," validation issue",s.errors.length>1?"s":""," found"]})})]})]}),e.jsxs(S,{onClick:()=>(e=>{K(e),J(!0),G(20)})(s),variant:"secondary",size:"sm",children:[e.jsx(u,{className:"h-4 w-4 mr-1"}),"Preview"]})]})},t)))}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsxs(S,{onClick:de,variant:"secondary",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(S,{onClick:async()=>{if(V&&le?.id&&re){w("process"),Z({current:0,total:B?.totalRows||0,status:"processing"});try{const e=await(async({uploadId:e,projectId:s,userId:t,confirmWarnings:a=!1})=>{const r=`${P}${T}/process`,l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...I()},body:JSON.stringify({uploadId:e,projectId:String(s),userId:String(t),confirmWarnings:a})});if(!l.ok){let e=null;try{const s=await l.text();e=JSON.parse(s)}catch{}const s=e?.result?.message||"Processing failed",t=e?.result?.details,a=e?.result?.code||l.status;throw new Error(`${t?`${s}: ${t}`:s} (code ${a})`)}return await l.json()})({uploadId:V,projectId:le.id,userId:re,confirmWarnings:!1});Z((e=>({...e,current:e.total,status:"completed"})));ee({timestamp:(e=>{if(!e)return(new Date).toLocaleString();try{return new Date(e).toLocaleString()}catch{return e}})(e?.completedAt),fileName:e?.fileName||B?.fileName||F?.name,fileSize:e?.fileSize||B?.fileSize,totalComponents:Object.values(e?.totalComponents||{}).reduce(((e,s)=>e+s),0),packages:e?.totalComponents?.Package||B?.sheets.find((e=>"package"===e.type))?.rows||0,suites:e?.totalComponents?.Suite||B?.sheets.find((e=>"suite"===e.type))?.rows||0,testCases:e?.totalComponents?.["Test Case"]||B?.sheets.find((e=>"test-case"===e.type))?.rows||0,projectName:le?.name||"Current Project",projectId:e?.projectId||le?.id})}catch(e){Z((s=>({...s,status:"error",errorMessage:e?.message||"Processing failed."}))),setTimeout((()=>{w("preview"),Z((e=>({...e,status:"idle",errorMessage:null})))}),3e3)}}},className:"bg-emerald-600 hover:bg-emerald-700",disabled:B.sheets.some((e=>"error"===R(e.validationStatus))),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Create Test Components"]})]})]})]}),"process"===y&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:["error"===X.status&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"h-8 w-8 text-red-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"Processing Failed"}),e.jsx("p",{className:"text-red-700 bg-red-50 rounded-lg p-3",children:X.errorMessage})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Returning to preview in a few seconds..."})]}),"processing"===X.status&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-pulse w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(r,{className:"h-8 w-8 text-emerald-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Creating Test Components"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we create your test components in the system..."})]}),e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[X.current," / ",X.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:X.current/X.total*100+"%"}})})]})]}),"completed"===X.status&&Q&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(n,{className:"h-10 w-10 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"ðŸŽ‰ Upload Successful!"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"All test components have been created successfully and are ready for use."})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 max-w-2xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"File Processed"}),e.jsx("div",{className:"text-sm text-gray-600",children:Q.fileName}),Q.fileSize&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Size: ",(Q.fileSize/1024).toFixed(1)," KB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Completed At"}),e.jsx("div",{className:"text-sm text-gray-600",children:Q.timestamp})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Project"}),e.jsx("div",{className:"text-sm text-gray-600",children:Q.projectName}),Q.projectId&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",Q.projectId]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:Q.totalComponents}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Components Created"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center bg-purple-100 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-purple-700",children:Q.packages}),e.jsx("div",{className:"text-xs text-purple-600",children:"Packages"})]}),e.jsxs("div",{className:"text-center bg-blue-100 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-blue-700",children:Q.suites}),e.jsx("div",{className:"text-xs text-blue-600",children:"Suites"})]}),e.jsxs("div",{className:"text-center bg-green-100 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-semibold text-green-700",children:Q.testCases}),e.jsx("div",{className:"text-xs text-green-600",children:"Test Cases"})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(S,{onClick:de,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Upload Another File"]}),e.jsxs(S,{variant:"secondary",className:"border-emerald-200 text-emerald-700 hover:bg-emerald-50",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"View Test Components"]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 max-w-md mx-auto",children:e.jsxs("div",{className:"flex items-center space-x-2 text-green-800",children:[e.jsx(n,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Your test automation components are now available in the system!"})]})})]})]})}),e.jsx(k,{isOpen:Y,onClose:()=>J(!1),title:`Preview: ${H?.name}`,size:"7xl",children:H&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[(()=>{const s=D(H.type);return e.jsxs(C,{className:E[s]?.color,children:[E[s]?.icon,e.jsx("span",{className:"ml-2",children:E[s]?.label})]})})(),e.jsxs("div",{className:"text-sm text-gray-600",children:[H.rows||H.rowCount," rows â€¢ ",H.columns.length," columns"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Previewing first ","all"===q?H.data?.length||0:q," row(s)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Rows:"}),e.jsxs("select",{value:q,onChange:e=>G("all"===e.target.value?"all":Number(e.target.value)),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]})]}),H.errors.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"Validation Issues"}),e.jsx("div",{className:"space-y-1",children:H.errors.map(((s,t)=>e.jsxs("div",{className:"text-sm text-amber-700",children:["Row ",s.row,', Column "',s.column,'": ',s.message]},t)))})]}),e.jsx("div",{className:"overflow-auto max-h-[70vh] rounded-md border border-gray-200",children:e.jsxs("table",{className:"w-full text-sm table-auto",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsx("tr",{className:"divide-x divide-gray-200",children:H.columns.map(((s,t)=>e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b whitespace-normal break-words align-top min-w-[160px] text-xs md:text-sm",title:s,children:s},t)))})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[(()=>{const s=Object.keys(H.data[0]||{}),t="all"===q?H.data.length:q;return H.data.slice(0,t).map(((t,a)=>e.jsx("tr",{className:"hover:bg-gray-50",children:H.columns.map(((a,r)=>{const l=s[r],i=void 0!==l?t[l]:((e,s)=>{if(!e)return"";const t=e[s];if(null!=t)return String(t);const a=e[String(s).trim()];if(null!=a)return String(a);const r=$(s);if(void 0!==e[r]&&null!==e[r])return String(e[r]);const l=String(s).trim().toLowerCase().replace(/[^a-z0-9]/g,""),i=Object.keys(e).find((e=>e.toLowerCase().replace(/[^a-z0-9]/g,"")===l));return i&&void 0!==e[i]&&null!==e[i]?String(e[i]):""})(t,a),n=null==i||""===i?"â€”":String(i);return e.jsx("td",{className:"px-3 py-2 text-gray-900 align-top max-w-[320px] break-words",title:n,children:n},r)}))},a)))})(),(()=>{const s=H.data.length-("all"===q?H.data.length:q);return s>0?e.jsx("tr",{children:e.jsxs("td",{colSpan:H.columns.length,className:"px-3 py-2 text-center text-gray-500 italic",children:["... and ",s," more rows"]})}):null})()]})]})})]})})]})};export{A as default};
