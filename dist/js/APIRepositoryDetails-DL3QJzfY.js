import{j as e}from"./chunk-D8bRv3Ag.js";import{r as a,u as s,a as t,R as r}from"./chunk-C74fWxxE.js";import{K as d,U as l,i as n,V as i,W as o,R as c}from"../assets/index-DUtqALCq.js";import{y as m}from"./chunk-Dw5YO7VD.js";import"./chunk-SnPUoUoO.js";import"./chunk-4QNEI4IN.js";const x=({items:a=[]})=>e.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-4 mt-2",children:[e.jsx("a",{href:"/dashboard",className:"flex items-center hover:text-[#4F46E5]",children:e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),a.map(((a,s)=>e.jsxs(r.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mx-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),a.path?e.jsx("a",{href:a.path,className:"hover:text-[#4F46E5]",children:a.label}):e.jsx("span",{className:"text-[#4F46E5] font-medium",children:a.label})]},s)))]}),h=({text:a})=>{if(!a)return null;const s=a.split(/(\\$\{[^}]+\})/g);return e.jsx("span",{children:s.map(((a,s)=>a.match(/^\$\{[^}]+\}$/)?e.jsx("span",{className:"bg-blue-100 text-blue-800 px-1 rounded",children:a},s):e.jsx("span",{children:a},s)))})},u=e=>{if(!e)return[];const a=/\$\{([^}]+)\}/g,s=[];let t;for(;null!==(t=a.exec(e));)s.push(t[1]);return[...new Set(s)]},p=()=>{const r=a.useRef(null),p=s(),y=t(),b=y.state?.apiId,[g,j]=a.useState(!!b),[v,N]=a.useState(!1),[f,w]=a.useState([]),[k,C]=a.useState({id:null,requestId:null,method:"GET",url:"",name:"",environment:"",description:"",headers:[{key:"",value:"",enabled:!0}],auth:{type:"No Auth",bearerToken:"",username:"",password:""},body:{type:"none",contentType:"application/json",raw:"",formData:[{key:"",value:"",type:"text",enabled:!0}],urlEncoded:[{key:"",value:"",enabled:!0}]},params:[{key:"",value:"",enabled:!0}]}),[E,T]=a.useState({isLoading:!1,status:null,statusText:"",time:null,size:null,contentType:"",data:null,headers:{},error:null}),[A,I]=a.useState("Params"),[P,D]=a.useState(null),[S,q]=a.useState([{id:"env_development",name:"Development"},{id:"env_staging",name:"Staging"},{id:"env_production",name:"Production"}]),L=e=>{const a=u(e.url),s=e.headers.filter((e=>e.key||e.value)).flatMap((e=>[...u(e.key),...u(e.value)])),t=e.params.filter((e=>e.key||e.value)).flatMap((e=>[...u(e.key),...u(e.value)])),r=u(e.body.raw),d=[...new Set([...a,...s,...t,...r])];w(d)};a.useEffect((()=>{if(b&&!v){(async()=>{try{j(!0);const e=await c.getById(b);if(!(e&&e.result&&e.result.data))throw new Error("Invalid API response format");{const a=e.result.data,s=Object.entries(a.request.headers||{}).map((([e,a])=>({key:e,value:a,enabled:!0})));0===s.length&&s.push({key:"",value:"",enabled:!0});const t=Object.entries(a.request.queryParams||{}).map((([e,a])=>({key:e,value:a,enabled:!0})));0===t.length&&t.push({key:"",value:"",enabled:!0});let r={type:"No Auth",bearerToken:"",username:"",password:""};a.request.auth&&("BEARER"===a.request.auth.type?r={type:"Bearer Token",bearerToken:a.request.auth.token||"",username:"",password:""}:"BASIC"===a.request.auth.type&&(r={type:"Basic Auth",bearerToken:"",username:a.request.auth.username||"",password:a.request.auth.password||""}));const d={id:a.apiId,requestId:a.request.requestId,method:a.method,url:a.url,name:a.apiRepoName,environment:a.envId,description:a.description||"",headers:s,params:t,auth:r,body:{type:"none",contentType:"application/json",raw:"",formData:[{key:"",value:"",type:"text",enabled:!0}],urlEncoded:[{key:"",value:"",enabled:!0}]}};C(d),L(d),N(!0),m.success("API details loaded")}}catch(e){m.error("Failed to load API details: "+(e.message||"Unknown error")),p("/test-design/api-repository")}finally{j(!1)}})()}}),[b,p,v]);const R=e=>{const{name:a,value:s}=e.target,t={...k,[a]:s};C(t),"url"===a&&L(t)},z=e=>{"headers"===e?C((e=>({...e,headers:[...e.headers,{key:"",value:"",enabled:!0}]}))):"params"===e?C((e=>({...e,params:[...e.params,{key:"",value:"",enabled:!0}]}))):"formData"===e?C((e=>({...e,body:{...e.body,formData:[...e.body.formData,{key:"",value:"",type:"text",enabled:!0}]}}))):"urlEncoded"===e&&C((e=>({...e,body:{...e.body,urlEncoded:[...e.body.urlEncoded,{key:"",value:"",enabled:!0}]}})))},$=(e,a)=>{"headers"===e?C((e=>({...e,headers:e.headers.filter(((e,s)=>s!==a))}))):"params"===e?C((e=>({...e,params:e.params.filter(((e,s)=>s!==a))}))):"formData"===e?C((e=>({...e,body:{...e.body,formData:e.body.formData.filter(((e,s)=>s!==a))}}))):"urlEncoded"===e&&C((e=>({...e,body:{...e.body,urlEncoded:e.body.urlEncoded.filter(((e,s)=>s!==a))}})))},B=(e,a,s,t)=>{let r,d;"headers"===e?(r=[...k.headers],r[a]={...r[a],[s]:t}):"params"===e?(r=[...k.params],r[a]={...r[a],[s]:t}):"formData"===e?(r=[...k.body.formData],r[a]={...r[a],[s]:t}):"urlEncoded"===e&&(r=[...k.body.urlEncoded],r[a]={...r[a],[s]:t}),d="headers"===e||"params"===e?{...k,[e]:r}:{...k,body:{...k.body,[e]:r}},C(d),L(d)},K=(e,a)=>{"headers"===e?C((e=>{const s=[...e.headers];return s[a]={...s[a],enabled:!s[a].enabled},{...e,headers:s}})):"params"===e?C((e=>{const s=[...e.params];return s[a]={...s[a],enabled:!s[a].enabled},{...e,params:s}})):"formData"===e?C((e=>{const s=[...e.body.formData];return s[a]={...s[a],enabled:!s[a].enabled},{...e,body:{...e.body,formData:s}}})):"urlEncoded"===e&&C((e=>{const s=[...e.body.urlEncoded];return s[a]={...s[a],enabled:!s[a].enabled},{...e,body:{...e.body,urlEncoded:s}}}))},F=(e,a)=>{C((s=>({...s,auth:{...s.auth,[e]:a}})))},O=()=>0===f.length?e.jsxs("div",{className:"text-sm text-gray-500 italic p-3 border-t",children:["No parameters detected. Use ","$","{paramName}"," syntax in URL, headers, params or body to create parameters."]}):e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 px-3",children:"Detected Parameters"}),e.jsx("div",{className:"px-3 pb-3 flex flex-wrap gap-2",children:f.map((a=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:["$","{"+a+"}"]},a)))})]});return e.jsxs("div",{className:"p-6 space-y-6 bg-white",children:[e.jsx(x,{items:[{label:"Test Design"},{label:"API Repository",path:"/test-design/api-repository"},{label:k.id?"Edit":"Create"}]}),g?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading API details..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border rounded-md shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:k.id?"Edit API Request":"New API Request"}),e.jsx("button",{onClick:async()=>{if(k.name&&k.url)try{j(!0);const e={};k.headers.filter((e=>e.enabled&&e.key)).forEach((a=>{e[a.key]=a.value}));const a={};k.params.filter((e=>e.enabled&&e.key)).forEach((e=>{a[e.key]=e.value}));const s={requestMetaData:{userId:"3",transactionId:`tx-${Date.now()}`,timestamp:(new Date).toISOString()},data:{apiRepoName:k.name,envId:k.environment,method:k.method,url:k.url,description:k.description,request:{headers:e,queryParams:a,pathParams:{}}}};let t;k.id&&(s.data.apiId=k.id,k.requestId&&(s.data.request.requestId=k.requestId)),k.id?(t=await c.update(s),m.success("API updated successfully")):(t=await c.update(s),m.success("API created successfully")),t&&t.result&&t.result.data&&p("/test-design/api-repository")}catch(e){m.error("Failed to save API: "+(e.message||"Unknown error"))}finally{j(!1)}else m.warning("API name and URL are required")},disabled:g,className:"px-4 py-2 bg-indigo-600 text-white text-sm rounded-md flex items-center gap-1 hover:bg-indigo-700 hover:-translate-y-0.5 transition-all disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("span",{children:"Save"})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Name"}),e.jsx("input",{type:"text",name:"name",value:k.name,onChange:R,placeholder:"Enter API name",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Environment"}),e.jsxs("select",{name:"environment",value:k.environment,onChange:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Select Environment"}),S.map((a=>e.jsx("option",{value:a.id,children:a.name},a.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:k.description,onChange:R,placeholder:"API description (optional)",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 mb-4 items-start",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Method"}),e.jsxs("select",{value:k.method,onChange:e=>C((a=>({...a,method:e.target.value}))),className:"w-full bg-white border border-gray-300 rounded-md px-3 py-2 text-sm font-medium",children:[e.jsx("option",{children:"GET"}),e.jsx("option",{children:"POST"}),e.jsx("option",{children:"PUT"}),e.jsx("option",{children:"PATCH"}),e.jsx("option",{children:"DELETE"}),e.jsx("option",{children:"OPTIONS"}),e.jsx("option",{children:"HEAD"})]})]}),e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL"}),e.jsx("div",{className:"flex items-center border border-gray-300 rounded overflow-hidden",children:e.jsx("input",{type:"text",name:"url",className:"flex-1 p-2 focus:outline-none focus:ring-1 focus:ring-indigo-500",value:k.url,onChange:R,placeholder:"https://api.example.com/v1/resource/$\\{resourceId\\}"})}),k.url&&k.url.includes("${")&&e.jsxs("div",{className:"mt-1 text-xs",children:[e.jsx("span",{className:"font-medium",children:"With parameters: "}),e.jsx(h,{text:k.url})]})]})}),e.jsxs("div",{className:"col-span-2 flex flex-col justify-end",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 invisible",children:"Send"}),e.jsx("button",{onClick:async()=>{T((e=>({...e,isLoading:!0,error:null})));try{const e={id:k.id,name:k.name,environment:k.environment,method:k.method,url:k.url,headers:k.headers,params:k.params,auth:k.auth},a=Date.now(),s=await c.execute(e),t=Date.now()-a,d=("string"==typeof s?s:JSON.stringify(s)).length;T({isLoading:!1,status:200,statusText:"OK",time:t,size:d,contentType:"application/json",data:s,headers:{},error:null}),r.current&&r.current.scrollIntoView({behavior:"smooth"})}catch(e){T({isLoading:!1,status:e.status||500,statusText:e.statusText||"Error",time:null,size:null,contentType:"",data:null,headers:{},error:e.message||"Failed to send request"})}},disabled:E.isLoading||!k.url,className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center gap-2 hover:bg-indigo-700 hover:-translate-y-0.5 transition-all disabled:opacity-50 w-full",children:E.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("span",{children:"Send"})]})})]})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-md shadow-sm overflow-hidden",children:[e.jsx("div",{className:"flex border-b",children:["Params","Headers","Authorization","Body"].map((a=>e.jsx("button",{onClick:()=>I(a),className:"px-4 py-3 text-sm font-medium border-b-2 hover:-translate-y-0.5 transition-all focus:outline-none "+(A===a?"border-indigo-600 text-indigo-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"),children:a},a)))}),e.jsxs("div",{className:"p-4",children:["Params"===A&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Query Parameters"}),e.jsxs("button",{onClick:()=>z("params"),className:"text-indigo-600 hover:text-indigo-800 hover:-translate-y-0.5 transition-all text-sm flex items-center",children:[e.jsx(n,{className:"mr-1",size:10}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-3 py-2"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Key"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Value"}),e.jsx("th",{className:"w-20 px-3 py-2"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.params.map(((a,s)=>e.jsxs("tr",{className:a.enabled?"":"bg-gray-50 text-gray-400",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:()=>K("params",s),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.key,onChange:e=>B("params",s,"key",e.target.value),placeholder:"Parameter name",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.value,onChange:e=>B("params",s,"value",e.target.value),placeholder:"Parameter value or $\\{paramName\\}",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>$("params",s),className:"text-gray-400 hover:text-red-500",children:e.jsx(i,{size:10})})})]},s)))})]})})]}),"Headers"===A&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Headers"}),e.jsxs("button",{onClick:()=>z("headers"),className:"text-indigo-600 hover:text-indigo-800 hover:-translate-y-0.5 transition-all text-sm flex items-center",children:[e.jsx(n,{className:"mr-1",size:10}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-3 py-2"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Key"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Value"}),e.jsx("th",{className:"w-20 px-3 py-2"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.headers.map(((a,s)=>e.jsxs("tr",{className:a.enabled?"":"bg-gray-50 text-gray-400",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:()=>K("headers",s),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.key,onChange:e=>B("headers",s,"key",e.target.value),placeholder:"Header name",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.value,onChange:e=>B("headers",s,"value",e.target.value),placeholder:"Header value or $\\{paramName\\}",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>$("headers",s),className:"text-gray-400 hover:text-red-500",children:e.jsx(i,{size:10})})})]},s)))})]})})]}),"Authorization"===A&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:k.auth.type,onChange:e=>{return a=e.target.value,void C((e=>({...e,auth:{...e.auth,type:a}})));var a},className:"w-full sm:w-72 border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{children:"No Auth"}),e.jsx("option",{children:"Bearer Token"}),e.jsx("option",{children:"Basic Auth"}),e.jsx("option",{children:"API Key"})]})]}),"Bearer Token"===k.auth.type&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Token"}),e.jsx("input",{type:"text",value:k.auth.bearerToken,onChange:e=>F("bearerToken",e.target.value),placeholder:"Your bearer token or $\\{paramName\\}",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The token will be added as: Authorization: Bearer <token>"})]}),"Basic Auth"===k.auth.type&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:k.auth.username,onChange:e=>F("username",e.target.value),placeholder:"Username or $\\{paramName\\}",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:k.auth.password,onChange:e=>F("password",e.target.value),placeholder:"Password or $\\{paramName\\}",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]})]}),"API Key"===k.auth.type&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key"}),e.jsx("input",{type:"text",value:k.auth.apiKeyName,onChange:e=>F("apiKeyName",e.target.value),placeholder:"API key name",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),e.jsx("input",{type:"text",value:k.auth.apiKeyValue,onChange:e=>F("apiKeyValue",e.target.value),placeholder:"API key value or $\\{paramName\\}",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add to"}),e.jsxs("select",{value:k.auth.apiKeyAddTo,onChange:e=>F("apiKeyAddTo",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{children:"Header"}),e.jsx("option",{children:"Query Params"})]})]})]}),"No Auth"===k.auth.type&&e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No authentication will be added to the request."})})]}),"Body"===A&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Body Type"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["none","raw","form-data","x-www-form-urlencoded"].map((a=>e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"bodyType",value:a,checked:k.body.type===a,onChange:()=>(e=>{C((a=>({...a,body:{...a.body,type:e}})))})(a),className:"h-4 w-4 text-indigo-600 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:"none"===a?"None":"raw"===a?"Raw":"form-data"===a?"Form Data":"URL Encoded"})]},a)))})]}),"raw"===k.body.type&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content Type"}),e.jsxs("select",{value:k.body.contentType,onChange:e=>{return a=e.target.value,void C((e=>({...e,body:{...e.body,contentType:a}})));var a},className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[e.jsx("option",{value:"application/json",children:"JSON"}),e.jsx("option",{value:"application/xml",children:"XML"}),e.jsx("option",{value:"text/plain",children:"Text"}),e.jsx("option",{value:"text/html",children:"HTML"})]})]}),e.jsx("div",{className:"border rounded-md",children:e.jsx("textarea",{value:k.body.raw,onChange:e=>(e=>{try{"application/json"===k.body.contentType&&(JSON.parse(e),D(null))}catch(s){D(s.message)}const a={...k,body:{...k.body,raw:e}};C(a),L(a)})(e.target.value),rows:10,className:"w-full p-3 font-mono text-sm "+(P?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"application/json"===k.body.contentType?'{\n  "key": "value",\n  "parameterized": "$\\{paramName\\}"\n}':"Enter request body"})}),P&&e.jsxs("p",{className:"mt-1 text-sm text-red-600",children:["Invalid JSON: ",P]})]}),"form-data"===k.body.type&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Form Data"}),e.jsxs("button",{onClick:()=>z("formData"),className:"text-indigo-600 hover:text-indigo-800 text-sm flex items-center",children:[e.jsx(n,{className:"mr-1",size:10}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-3 py-2"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Key"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Value"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2 w-24",children:"Type"}),e.jsx("th",{className:"w-20 px-3 py-2"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.body.formData.map(((a,s)=>e.jsxs("tr",{className:a.enabled?"":"bg-gray-50 text-gray-400",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:()=>K("formData",s),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.key,onChange:e=>B("formData",s,"key",e.target.value),placeholder:"Key",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.value,onChange:e=>B("formData",s,"value",e.target.value),placeholder:"Value or ${paramName}",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:a.type,onChange:e=>B("formData",s,"type",e.target.value),className:"w-full border-0 p-0 focus:ring-0 text-sm "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled,children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"file",children:"File"})]})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>$("formData",s),className:"text-gray-400 hover:text-red-500",children:e.jsx(i,{size:10})})})]},s)))})]})})]}),"x-www-form-urlencoded"===k.body.type&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"URL Encoded Data"}),e.jsxs("button",{onClick:()=>z("urlEncoded"),className:"text-indigo-600 hover:text-indigo-800 hover:-translate-y-0.5 transition-all text-sm flex items-center",children:[e.jsx(n,{className:"mr-1",size:10}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-3 py-2"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Key"}),e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 uppercase px-3 py-2",children:"Value"}),e.jsx("th",{className:"w-20 px-3 py-2"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.body.urlEncoded.map(((a,s)=>e.jsxs("tr",{className:a.enabled?"":"bg-gray-50 text-gray-400",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:()=>K("urlEncoded",s),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.key,onChange:e=>B("urlEncoded",s,"key",e.target.value),placeholder:"Key",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.value,onChange:e=>B("urlEncoded",s,"value",e.target.value),placeholder:"Value or ${paramName}",className:"w-full border-0 p-0 focus:ring-0 "+(a.enabled?"":"bg-gray-50 text-gray-400"),disabled:!a.enabled})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>$("urlEncoded",s),className:"text-gray-400 hover:text-red-500",children:e.jsx(i,{size:10})})})]},s)))})]})})]}),"none"===k.body.type&&e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No request body will be sent."})})]})]}),e.jsx(O,{})]}),e.jsxs("div",{ref:r,className:"bg-white border rounded-md shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Response"}),E.data&&e.jsxs("button",{onClick:()=>{const e="object"==typeof E.data?JSON.stringify(E.data,null,2):String(E.data);navigator.clipboard.writeText(e)},className:"text-indigo-600 hover:text-indigo-800 hover:-translate-y-0.5 transition-all text-sm flex items-center",children:[e.jsx(o,{className:"mr-1"}),"Copy"]})]}),e.jsx("div",{className:"p-4",children:E.isLoading?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Sending request..."})]}):E.error?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Request Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:E.error})})]})]})}):E.data?e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(U=E.status,U?U>=200&&U<300?"bg-green-100 text-green-800":U>=300&&U<400?"bg-blue-100 text-blue-800":U>=400&&U<500?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800":"bg-gray-100 text-gray-700"),children:[E.status," ",E.statusText]}),E.time&&e.jsxs("span",{className:"text-sm text-gray-600",children:[E.time,"ms"]}),E.size&&e.jsxs("span",{className:"text-sm text-gray-600",children:[E.size," bytes"]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response Body"}),e.jsx("div",{className:"border rounded-md bg-gray-50",children:e.jsx("pre",{className:"p-4 text-sm font-mono overflow-auto max-h-96",children:(e=>{try{return JSON.stringify(e,null,2)}catch(a){return String(e)}})(E.data)})})]}),Object.keys(E.headers).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response Headers"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Header"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(E.headers).map((([a,s])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:a}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:s})]},a)))})]})})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(l,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Ready to send"}),e.jsx("p",{className:"text-sm",children:"Click the Send button to execute the request"})]})})]})]})]});var U};export{p as default};
