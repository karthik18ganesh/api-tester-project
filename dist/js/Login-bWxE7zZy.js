import{j as e}from"./chunk-BAZEzdRI.js";import{r as s,u as r}from"./chunk-N8EMqdL-.js";import{y as t}from"./chunk-CQIvISRI.js";import{O as a,u as l,A as o,P as i}from"../assets/index-C0OMGUoK.js";import"./chunk-MJHYApCa.js";import"./chunk-Cef-BAxw.js";const n=()=>{const[n,c]=s.useState(""),[d,m]=s.useState(""),[x,u]=s.useState(""),g=r(),{login:h,setLoading:f,isLoading:p,rememberMe:j,rememberedUsername:b,setRememberMe:y}=a(),{activeProject:N}=l();s.useEffect((()=>{b&&c(b)}),[b]);return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-cover bg-center bg-no-repeat px-4 font-inter",style:{backgroundImage:"url(/images/lp-bg-B7nRU2LY.jpg)"},children:e.jsxs("div",{className:"relative z-10 flex flex-col items-center max-w-md w-full",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-md p-6 rounded-xl shadow-xl border-2 border-indigo-100 w-full",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-md mr-3",children:e.jsx(o,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["API",e.jsx("span",{className:"text-indigo-600",children:"Tester"})]}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:"Automation Platform"})]})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-center text-sm mt-1",children:"Enter your credentials to access your account"})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(""),f(!0);try{const e=await i.auth.login(n,d),{code:r,message:a,data:l}=e.result;if("200"===r){y(j,j?n:""),localStorage.setItem("token",l.token),localStorage.setItem("userId",l.userId);try{const e=await i.users.getById(l.userId),s=e?.result,r=s&&(s.data||s)||{},t=r.permissions||{},a=Array.isArray(r.projects)?r.projects:[];localStorage.setItem("permissions",JSON.stringify(t)),localStorage.setItem("assignedProjects",JSON.stringify(a)),localStorage.setItem("auth-storage",JSON.stringify({state:{token:l.token,userId:l.userId,user:r,role:r.role||l.role,isAuthenticated:!0,rememberMe:j,rememberedUsername:j?n:"",permissions:t,assignedProjects:a},version:0})),h({user:r,token:l.token,userId:l.userId,role:r.role||l.role})}catch(s){h({user:{userId:l.userId,role:l.role},token:l.token,userId:l.userId,role:l.role})}t.success(a),g("/dashboard")}else u(a),t.error(a)}catch(r){u("Login failed. Please try again."),t.error("Login failed")}finally{f(!1)}},className:"space-y-5",children:[x&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:e.jsx("p",{className:"text-red-700 text-sm",children:x})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Enter username",value:n,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white/90 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",placeholder:"Enter password",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white/90 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:()=>{y(!j,j?"":n)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{children:"Remember me"})]}),e.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2.5 px-4 rounded-md font-medium transition-colors duration-200 relative overflow-hidden shadow-md",children:p?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Login"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 bg-white/70 px-3 py-1 rounded-full inline-block shadow-sm",children:["API Automation Â© ",(new Date).getFullYear()]})})]})})};export{n as default};
